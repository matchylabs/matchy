# Matchy WASM Demo

Interactive demo for matchy-wasm running entirely in the browser.

## Features

### Database Builder Tab
- Add entries manually (IP addresses, CIDRs, glob patterns, literals)
- Attach JSON metadata to each entry
- Load sample entries to try out the system
- **Download** the built database as a `.mxy` file

### Import CSV/JSON Tab
- **Upload files** via drag & drop or file picker
- **Paste data** directly in CSV, JSON, or text format
- Auto-detects format from file extension/content
- Preview parsed entries before building
- Build and download the resulting database

**Supported Formats:**

**CSV** (like command-line `matchy build -f csv`):
```csv
entry,category,severity
192.168.0.0/16,private,low
*.evil.com,malware,high
```

**JSON** (like command-line `matchy build -f json`):
```json
[
  {"key": "192.168.0.0/16", "data": {"category": "private"}},
  {"key": "*.evil.com", "data": {"severity": "high"}}
]
```

**Text** (like command-line `matchy build -f text`):
```
192.168.0.0/16
*.evil.com
malware.org
```

### Query Tab
- Test lookups against the built database
- Single query or batch mode
- See match results with timing

### Extractor Tab
- Extract IPs, domains, emails, hashes, crypto addresses from text
- Highlighted visualization of extracted entities

## Running Locally

```bash
# From the matchy-wasm crate directory
./demo/serve.sh
```

This will:
1. Build the WASM package with `wasm-pack`
2. Start a local HTTP server at http://localhost:8080

## Integrating with the Book

The demo can be served as part of the matchy documentation book:

```bash
# Build WASM into book output
wasm-pack build crates/matchy-wasm --target web --out-dir ../../book/book/demo/pkg

# Copy demo files
cp crates/matchy-wasm/demo/index.html book/book/demo/
```

Then access at: `https://your-site.github.io/matchy/demo/`

## Files

- `index.html` - Self-contained demo page (no build step needed)
- `serve.sh` - Helper script to build and serve locally
- `pkg/` - Built WASM package (generated by wasm-pack)
